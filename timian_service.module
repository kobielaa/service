<?php
/**
 * Implements hook_services_resources
 */

function timian_service_services_resources()
{
    return [
        'supplier' => [
            'actions' => [
                'create' => [
                    'help'            => 'Create a supplier user',
                    'callback'        => '_timian_service_fetch_data',
                    'args'            => [
                        [
                            'name'        => 'security_key',
                            'type'        => 'string',
                            'description' => 'A valid username',
                            'source'      => ['data' => 'key'],
                            'optional'    => false,
                        ],
                        [
                            'name'        => 'name',
                            'type'        => 'string',
                            'description' => 'A valid password',
                            'source'      => ['data' => 'name'],
                            'optional'    => false,
                        ],
                    ],
                    'access callback' => '_timian_service_data_access',
                    'file'            => [
                        'type'   => 'inc',
                        'module' => 'timian_service',
                        'name'   => 'resources/test'
                    ],
                ],
            ]
            ],
            'orders' => [
                'operations' => [
                    'retrieve' => [
                        'help'            => 'Get order',
                        'callback'        => '_timian_service_fetch_data',
                        'args'            => [
                            [
                                'name'        => 'order_id',
                                'type'        => 'int',
                                'description' => 'Order ID',
                                'source' =>     array('path' => '0'),
                                'optional'    => false,
                            ],
                        ],
                        'access callback' => '_timian_service_data_access',
                        'file'            => [
                            'type'   => 'inc',
                            'module' => 'timian_service',
                            'name'   => 'resources/orders'
                        ],
                    ],
                ]
                ],
                'products' => [
                    'operations' => [
                        'retrieve' => [
                            'help'            => 'Get products',
                            'callback'        => '_timian_service_fetch_product',
                            'args'            => [
                                [
                                    'name'        => 'product_model',
                                    'type'        => 'string',
                                    'description' => 'Product model',
                                    'source' =>     array('path' => '0'),
                                    'optional'    => false,
                                ],
                                array(
                                    'name' => 'title',
                                    'optional' => FALSE,
                                    'type' => 'string',
                                    'description' => 'Product description (title)',
                                    'source' => array('param' => 'title'),
                                  ),
                            ],
                            'access callback' => '_timian_service_data_access',
                            'file'            => [
                                'type'   => 'inc',
                                'module' => 'timian_service',
                                'name'   => 'resources/products'
                            ],
                        ],
                        'index' => [
                            'help'            => 'Get products',
                            'callback'        => '_timian_service_fetch_data',
                            'access callback' => '_timian_service_data_access',
                            'file'            => [
                                'type'   => 'inc',
                                'module' => 'timian_service',
                                'name'   => 'resources/products'
                            ],
                            'args' => array(
                                array(
                                  'name' => 'search',
                                  'optional' => FALSE,
                                  'type' => 'string',
                                  'description' => 'The zero-based index of the page to get, defaults to 0.',
                                  'source' => array('param' => 'search'),
                                ),
                            ),
                        ],
                        'create' => [
                            'help'            => 'Add product to order',
                            'callback'        => '_timian_service_create_product',
                            'args'            => [
                                array(
                                    'name' => 'search',
                                    'optional' => FALSE,
                                    'type' => 'string',
                                    'description' => 'Product description (title)',
                                    'source' => array('param' => 'search'),
                                  ),
                                //   array(
                                //     'name' => 'title',
                                //     'optional' => FALSE,
                                //     'type' => 'string',
                                //     'description' => 'Product description (title)',
                                //     'source' => array('param' => 'title'),
                                //   ),
                                //   array(
                                //     'name' => 'model',
                                //     'optional' => FALSE,
                                //     'type' => 'string',
                                //     'description' => 'Product description (title)',
                                //     'source' => array('param' => 'model'),
                                //   ),
                                //   array(
                                //     'name' => 'quantity',
                                //     'optional' => FALSE,
                                //     'type' => 'string',
                                //     'description' => 'Product description (title)',
                                //     'source' => array('param' => 'quantity'),
                                //   ),
                                //   array(
                                //     'name' => 'weight',
                                //     'optional' => FALSE,
                                //     'type' => 'string',
                                //     'description' => 'Product description (title)',
                                //     'source' => array('param' => 'weight'),
                                //   ),
                                //   array(
                                //     'name' => 'price',
                                //     'optional' => FALSE,
                                //     'type' => 'string',
                                //     'description' => 'Product description (title)',
                                //     'source' => array('param' => 'price'),
                                //   ),
                            ],
                            'access callback' => '_timian_service_data_access',
                            'file'            => [
                                'type'   => 'inc',
                                'module' => 'timian_service',
                                'name'   => 'resources/products'
                            ],
                        ],
                        'delete' => [
                            'help'            => 'Delete product',
                            'callback'        => '_timian_service_resource_delete',
                            'access arguments append' => true,
                            'args'            => [
                                  array(
                                    'name' => 'order_id',
                                    'optional' => FALSE,
                                    'source' => array('path' => 0),
                                    'type' => 'int',
                                    'description' => 'The nid of the node to update',
                                  ),
                                  array(
                                    'name' => 'ckokolwiek',
                                    'optional' => FALSE,
                                    'source' => array('path' => 1),
                                    'type' => 'int',
                                    'description' => 'The nid of the node to update',
                                  ),
                                  
                            ],
                            'access callback' => '_timian_service_data_access',
                            'file'            => [
                                'type'   => 'inc',
                                'module' => 'timian_service',
                                'name'   => 'resources/products'
                            ],
                        ],
                    ],
                    
                    ],

    ];
}